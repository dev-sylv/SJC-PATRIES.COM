from django.db import models
from django.contrib.auth.models import User
# from django.contrib.auth.models import AbstractUser


# class get_user_model(models.Model):
#     author = models.ForeignKey(settings.AUTH_USER_MODEL,on_delete=models.CASCADE,)
    
# Create your models here.

class MyUser(User):
    profile_image = models.ImageField(blank=True, null=True, upload_to='uploads/')
    phone_number = models.Field(max_length=15)
    address = models.TextField(max_length=500)

    def __str__(self):
        return self.username
    # def __str__(self):
    #     return self.Username - this is the string representation.

    def get_profile_image(self):
        if self.profile_image:
            return self.profile_image.url


class Products(models.Model):
    product_name = models.CharField(max_length=50)
    slug = models.SlugField(unique=True)
    product_description = models.TextField()
    product_price = models.FloatField()
    product_image = models.ImageField(blank=True, null=True, upload_to='uploads/')
    user_id = models.ForeignKey(User, on_delete= models.CASCADE)
    # category_id = models.ForeignKey(Category, on_delete= models.CASCADE) 

    def __str__(self):
        return self.product_name

    def get_product_image(self):
        if self.product_image:
            return self.product_image.url

class Category(models.Model):
    Category_name = models.CharField(max_length=60)
    slug = models.SlugField(unique=True)
    product_id = models.ForeignKey(Products, on_delete= models.CASCADE)
    category_description = models.TextField()
    category_image = models.ImageField(blank=True, null=True, upload_to='uploads/')

    def __str__(self):
        return self.category_name

    def get_category_image(self):
        if self.category_image:
            return self.category_image.url

class ProductCategory(models.Model):
    category_name = models.ForeignKey(Category, on_delete= models.CASCADE)

    class Meta():
        verbose_name_plural = 'ProductCategories'

class Menu(models.Model):
    AVAILABLE = 'available'
    UNAVAILABLE = 'unavailable'
    CHOOSE = 'please choose'
    menu_status = [
        (AVAILABLE, 'available'),
        (UNAVAILABLE, 'unavailable'),
        (CHOOSE, 'please choose'),
    ]
    # product_name = models.ForeignKey(Products, on_delete= models.CASCADE)
    slug = models.SlugField(unique=True)
    # product_description =  models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_price = models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_image =  models.ForeignKey(Products, on_delete= models.CASCADE)
    menu_status = models.CharField(max_length=30, verbose_name= 'Menu Status', default = CHOOSE)

    def __str__(self):
        return self.product_name

    def get_product_image(self):
        if self.product_image:
            return self.product_image.url

class Orders(models.Model):
    product_id = models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_name  = models.ForeignKey(Products, on_delete= models.CASCADE)
    slug = models.SlugField(unique=True)
    # product_description =  models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_price = models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_image =  models.ForeignKey(Products, on_delete= models.CASCADE)
    quantity = models.TextField()
    user_id = models.ForeignKey(User, on_delete= models.CASCADE)
    # Username = models.ForeignKey(User, on_delete= models.CASCADE)
    # email = models.ForeignKey(User, on_delete= models.CASCADE)
    # phonenumber = models.ForeignKey(User, on_delete= models.CASCADE)
    # address = models.ForeignKey(User, on_delete= models.CASCADE)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    order_date = models.DateTimeField(auto_now_add=True)
    total_amount = models.FloatField()
    # order_status varchar(20)

    def __str__(self):
        return self.product_name

    def get_product_image(self):
        if self.product_image:
            return self.product_image.url

    class Meta():
        verbose_name_plural = 'Order'

class Reviews(models.Model):
    user_id = models.ForeignKey(User, on_delete= models.CASCADE)
    menu_id = models.ForeignKey(Menu, on_delete= models.CASCADE)
    score = models.FloatField(1-10)
    remarks = models.TextField()
    date_recorded = models.DateTimeField(auto_now_add=True)

class SylviaPhotos(models.Model):
    image1 = models.ImageField(blank=True, null=True, upload_to='uploads/', verbose_name = 'sylvia_image1')
    image2 = models.ImageField(blank=True, null=True, upload_to='uploads/', verbose_name = 'sylvia_image2')
    image3 = models.ImageField(blank=True, null=True, upload_to='uploads/', verbose_name = 'sylvia_image3')
    image4 = models.ImageField(blank=True, null=True, upload_to='uploads/', verbose_name = 'sylvia_image4')

    def get_image1(self):
        if self.image1:
            return self.image1.url

    def get_image2(self):
        if self.image2:
            return self.image2.url

    def get_image3(self):
        if self.image3:
            return self.image3.url   
            
    def get_image4(self):
        if self.image4:
            return self.product_image4.url

class Cart(models.Model):
    # product_name  = models.ForeignKey(Products, on_delete= models.CASCADE)
    slug = models.SlugField(unique=True)
    # product_description =  models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_price = models.ForeignKey(Products, on_delete= models.CASCADE)
    # product_image =  models.ForeignKey(Products, on_delete= models.CASCADE)
    quantity = models.TextField()
    user_id = models.ForeignKey(User, on_delete= models.CASCADE)
    # user_Username = models.ForeignKey(User, on_delete= models.CASCADE)
    # user_email = models.ForeignKey(User, on_delete= models.CASCADE)
    # user_phonenumber = models.ForeignKey(User, on_delete= models.CASCADE)

    def __str__(self):
        return self.product_name

    def get_product_image(self):
        if self.product_image:
            return self.product_image.url

class Blog(models.Model):
    blog_image = models.ImageField(blank=True, null=True, upload_to='uploads/')
    blog_date = models.DateTimeField(auto_now_add=True)
    blog_name = models.CharField(max_length=30)
    slug = models.SlugField(unique=True)
    blog_description = models.TextField()

class HomeSlides(models.Model):
    product_adjective = models.CharField(max_length=20)
    product_name =  models.ForeignKey(Products, on_delete= models.CASCADE)
    slug = models.SlugField(unique=True)
    description = models.TextField()
    imageA =  models.ImageField(blank=True, null=True, upload_to='uploads/')

    def __str__(self):
        return self.product_name

    def get_imageA(self):
        if self.imageA:
            return self.imageA.url

class Team(models.Model):
    image1 =  models.ImageField(blank=True, null=True, upload_to='uploads/')
    team_name = models.CharField(max_length=50)
    slug = models.SlugField(unique=True)
    team_description = models.TextField()
    team_bio = models.CharField(max_length=50)

    def __str__(self):
        return self.team_name

class Payment(models.Model):
    order_id = models.ForeignKey(Orders, on_delete= models.CASCADE)
    amount = models.FloatField()
    paid_by = models.CharField(max_length=20)
    payment_date = models.DateTimeField(auto_now_add=True)
    processed_by = models.CharField(max_length=30)

class SiteInfo(models.Model):
    site_name = models.CharField(max_length=100)
    slug = models.SlugField(unique=True)
    description = models.TextField()
    contact_info = models.CharField(max_length=50)
    address = models.CharField(max_length=100)
    last_update = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.site_name
